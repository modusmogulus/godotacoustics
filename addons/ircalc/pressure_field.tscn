[gd_scene load_steps=15 format=3 uid="uid://duu4kij01s5vk"]

[ext_resource type="Script" uid="uid://u5itcuk0qaoj" path="res://addons/ircalc/pressure_field.gd" id="1_c2dkg"]
[ext_resource type="AudioStream" uid="uid://buqec72j3kq1a" path="res://addons/ircalc/wavetables/SAMPLES_DOWN.wav" id="4_ioc0h"]
[ext_resource type="PackedScene" uid="uid://cx2hr84cedabb" path="res://addons/ircalc/models/wavevis.glb" id="4_qysnn"]
[ext_resource type="Material" uid="uid://cmeftlhjjekun" path="res://addons/ircalc/3rdparty/materials/waveguidemat_exciting.tres" id="5_ioc0h"]
[ext_resource type="AudioStream" uid="uid://dvgk6m08veh7p" path="res://addons/ircalc/wavetables/SAMPLES_UP.wav" id="5_qysnn"]

[sub_resource type="SphereShape3D" id="SphereShape3D_ccqrm"]
radius = 0.897

[sub_resource type="SphereShape3D" id="SphereShape3D_c2dkg"]
radius = 1.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_ioc0h"]
streams_count = 2
stream_0/stream = ExtResource("5_qysnn")
stream_1/stream = ExtResource("4_ioc0h")

[sub_resource type="Gradient" id="Gradient_ioc0h"]
offsets = PackedFloat32Array(0.367647, 0.720588)
colors = PackedColorArray(1, 1, 1, 1, 0.154412, 0.154412, 0.154412, 0.154412)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_qysnn"]
gradient = SubResource("Gradient_ioc0h")
width = 7
height = 7
fill = 1
fill_from = Vector2(0.495, 0.485)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_epifv"]
blend_mode = 1
shading_mode = 0
disable_ambient_light = true
disable_fog = true
albedo_color = Color(0.219501, 0.219501, 0.219501, 1)
albedo_texture = SubResource("GradientTexture2D_qysnn")
billboard_mode = 1

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_4fuk7"]
emission_shape = 1
emission_sphere_radius = 4.96
direction = Vector3(0, 0, 0)
gravity = Vector3(0, 0, 0)

[sub_resource type="QuadMesh" id="QuadMesh_q6iem"]

[sub_resource type="SphereShape3D" id="SphereShape3D_ioc0h"]
radius = 4.886

[node name="PressureField" type="CharacterBody3D"]
process_mode = 3
collision_layer = 0
collision_mask = 2049
motion_mode = 1
wall_min_slide_angle = 0.0
script = ExtResource("1_c2dkg")

[node name="Collider" type="CollisionShape3D" parent="."]
shape = SubResource("SphereShape3D_ccqrm")
debug_color = Color(0.740182, 0.577758, 5.77569e-07, 1)
debug_fill = false

[node name="Forcefield" type="Area3D" parent="."]
collision_layer = 2048
collision_mask = 2048

[node name="Bounds" type="CollisionShape3D" parent="Forcefield"]
shape = SubResource("SphereShape3D_c2dkg")
debug_color = Color(0.222327, 0.510533, 1, 1)
debug_fill = false

[node name="wavetable" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -4.61887)
stream = SubResource("AudioStreamRandomizer_ioc0h")
attenuation_model = 3
max_distance = 495.43

[node name="Soundfield" parent="." instance=ExtResource("4_qysnn")]
transform = Transform3D(5.215, 0, 0, 0, -2.27955e-07, 5.215, 0, -5.215, -2.27955e-07, 0.232402, 0, 0.0214216)

[node name="wavevis" parent="Soundfield" index="0"]
transform = Transform3D(1, 0, 0, 0, 0.490465, 3.55271e-15, 0, 0, 1, 0, 0, 0)
surface_material_override/0 = ExtResource("5_ioc0h")

[node name="GPUParticles3D" type="GPUParticles3D" parent="Soundfield"]
transform = Transform3D(1, 0, 0, 0, 0.490465, 0, 0, 3.55271e-15, 1, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_epifv")
amount = 148
lifetime = 9.83
transform_align = 1
process_material = SubResource("ParticleProcessMaterial_4fuk7")
draw_pass_1 = SubResource("QuadMesh_q6iem")

[node name="PressureArea" type="Area3D" parent="."]
collision_layer = 1073741824
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="PressureArea"]
shape = SubResource("SphereShape3D_ioc0h")

[editable path="Soundfield"]
